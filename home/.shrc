#!/usr/bin/env sh

# Path additions
add_to_path_if_valid() {
    dir="$1"
    if [ -d "$dir" ]; then
        case ":$PATH:" in
        *":$dir:"*) ;;
        *) PATH="$dir:$PATH" ;;
        esac
    fi
}
add_to_path_if_valid "${HOME}/.local/bin"
add_to_path_if_valid "${DOTFILES_DIR}/home/.local/bin"
add_to_path_if_valid "${HOME}/.pixi/bin"
export PATH

# Get 'less' showing UTF-8 characters
export LESSCHARSET=utf-8

# ls file/directory colours
# ow and tw change symlinks, and di changes directory colours
export LS_COLORS="${LS_COLORS}:ow=1;94:tw=1;94:di=36;0:ex=0;32"

if command -v cargo >/dev/null; then
    export CARGO_NET_GIT_FETCH_WITH_CLI=true
fi

if command -v conda >/dev/null; then
    conda config --set changeps1 False
fi

if command -v ninja >/dev/null; then
    export CMAKE_GENERATOR=Ninja
fi

if command -v zellij >/dev/null; then
    export ZELLIJ_CONFIG_DIR="${DOTFILES_DIR}/home/.config/zellij"
fi

# Alias definitions (must come before functions)
_aliases_path="${DOTFILES_DIR}/home/.sh_aliases"
if [ -f "${_aliases_path}" ]; then
    . "${_aliases_path}"
fi
unset _aliases_path

# Function definitions
_funcs_path="${DOTFILES_DIR}/home/.sh_functions"
if [ -f "${_funcs_path}" ]; then
    . "${_funcs_path}"
fi
unset _funcs_path
